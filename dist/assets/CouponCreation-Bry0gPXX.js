import{r as a,j as e,a as u,y as d}from"./index-DdFKgk6t.js";const N=()=>{const[o,m]=a.useState([]),[r,p]=a.useState(""),[l,h]=a.useState(""),[n,x]=a.useState(""),[c,j]=a.useState("5_bookings"),[i,b]=a.useState("");a.useEffect(()=>{(async()=>{try{const t=await u.get("http://localhost:5000/eligible-users");m(t.data)}catch(t){console.error("Error fetching users:",t)}})()},[]);const f=async s=>{var t;s.preventDefault();try{await u.post("http://localhost:5000/create-coupon",{user_id:r,coupon_code:l,discount:n,reason:c,expiry_date:i}),d.success(`Coupon added user ${o[0].name}`)}catch(v){const y=((t=v.response)==null?void 0:t.data)||"Failed to create coupon, Please try again";d.warning(y)}};return e.jsxs("div",{className:"container mt-5",children:[e.jsx("h2",{children:"Create Coupon"}),e.jsxs("form",{onSubmit:f,className:"card p-4 shadow-sm",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Select User"}),e.jsxs("select",{className:"form-select",value:r,onChange:s=>p(s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Choose user"}),Array.isArray(o)&&o.length>0?o.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id)):e.jsx("option",{disabled:!0,children:"No users available"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Coupon Code"}),e.jsx("input",{type:"text",className:"form-control",value:l,onChange:s=>h(s.target.value),required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Discount (%)"}),e.jsx("input",{type:"number",className:"form-control",value:n,onChange:s=>x(s.target.value),required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Reason"}),e.jsxs("select",{className:"form-select",value:c,onChange:s=>j(s.target.value),children:[e.jsx("option",{value:"5_bookings",children:"5 Successful Bookings"}),e.jsx("option",{value:"promotion",children:"Promotion"}),e.jsx("option",{value:"loyalty",children:"Loyalty Reward"}),e.jsx("option",{value:"special_offer",children:"Special Offer"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Expiry Date"}),e.jsx("input",{type:"date",className:"form-control",value:i,onChange:s=>b(s.target.value),required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Create Coupon"})]})]})};export{N as default};
