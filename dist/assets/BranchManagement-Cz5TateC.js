import{r as l,a as r,j as e}from"./index-DdFKgk6t.js";const D=()=>{const[g,N]=l.useState([]),[b,v]=l.useState(""),[C,j]=l.useState(""),[t,s]=l.useState(null),[y,f]=l.useState(""),[_,u]=l.useState(""),[n,d]=l.useState(null),[o,h]=l.useState(null),[c,p]=l.useState(null),[i,x]=l.useState(null);l.useEffect(()=>{m()},[]);const m=()=>{r.get("http://localhost:5000/branches").then(a=>N(a.data))},I=async()=>{const a=new FormData;a.append("name",b),a.append("location",C),a.append("contactNo",_),a.append("description",y),n&&a.append("home_img",n),o&&a.append("hotel_front_img",o),c&&a.append("hotel_img",c),i&&a.append("hotel_img2",i),await r.post("http://localhost:5000/branches",a,{headers:{"Content-Type":"multipart/form-data"}}),N(""),u(""),f(""),j(""),d(""),h(""),p(""),x(""),m()},H=a=>{r.delete(`http://localhost:5000/branches/${a}`).then(()=>{m()})},w=a=>{s(a)},S=async()=>{const a=new FormData;a.append("name",t.name),a.append("location",t.location),a.append("contactNo",t.contactNo),a.append("description",t.description),n&&a.append("home_img",n),o&&a.append("hotel_front_img",o),c&&a.append("hotel_img",c),i&&a.append("hotel_img2",i),await r.put(`http://localhost:5000/branches/${t.id}`,a,{headers:{"Content-Type":"multipart/form-data"}}),m(),s(null)};return e.jsxs("div",{className:"container mt-4",children:[e.jsx("h2",{children:"Branch Management"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Branch Name"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter branch name",onChange:a=>v(a.target.value)}),e.jsx("label",{className:"form-label mt-2",children:"Location"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter location",onChange:a=>j(a.target.value)}),e.jsx("label",{className:"form-label mt-2",children:"Contact No"}),e.jsx("input",{type:"number",className:"form-control",placeholder:"Enter contact number",onChange:a=>u(a.target.value)}),e.jsx("label",{className:"form-label mt-2",children:"Description"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter description",onChange:a=>f(a.target.value)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Home Image"}),e.jsx("input",{type:"file",className:"form-control",onChange:a=>d(a.target.files[0])}),e.jsx("label",{className:"form-label mt-2",children:"Hotel Front Image"}),e.jsx("input",{type:"file",className:"form-control",onChange:a=>h(a.target.files[0])}),e.jsx("label",{className:"form-label mt-2",children:"Hotel Image 1"}),e.jsx("input",{type:"file",className:"form-control",onChange:a=>p(a.target.files[0])}),e.jsx("label",{className:"form-label mt-2",children:"Hotel Image 2"}),e.jsx("input",{type:"file",className:"form-control",onChange:a=>x(a.target.files[0])})]})]}),e.jsx("button",{className:"btn btn-primary mt-3",onClick:I,children:"Add Branch"}),e.jsx("h4",{className:"mt-4",children:"Available Branches"}),e.jsxs("table",{className:"table table-bordered table-fixed",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"col-1",children:"S.No"}),e.jsx("th",{className:"col-3",children:"Name"}),e.jsx("th",{className:"col-4",children:"Location"}),e.jsx("th",{className:"col-4",children:"Contact No"}),e.jsx("th",{className:"col-4",children:"Description"}),e.jsx("th",{className:"col-3",children:"Action"})]})}),e.jsx("tbody",{children:g.length>0?g.map((a,B)=>e.jsxs("tr",{children:[e.jsx("td",{className:"fixed-cell",children:B+1})," ",e.jsx("td",{className:"fixed-cell",children:a.name}),e.jsx("td",{className:"fixed-cell",children:a.location}),e.jsx("td",{className:"fixed-cell",children:a.contactNo}),e.jsx("td",{className:"fixed-cell",children:a.description}),e.jsxs("td",{className:"fixed-cell d-flex gap-2",children:[e.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>w(a),children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>H(a.id),children:"Delete"})]})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No branches available"})})})]}),t&&e.jsx("div",{className:"modal show d-block w-100",children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Edit Branch"}),e.jsx("button",{className:"btn-close",onClick:()=>s(null)})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("input",{type:"text",className:"form-control mb-2",value:t.name,onChange:a=>s({...t,name:a.target.value})}),e.jsx("input",{type:"text",className:"form-control mb-2",value:t.location,onChange:a=>s({...t,location:a.target.value})}),e.jsx("input",{type:"number",className:"form-control mb-2",value:t.contactNo,onChange:a=>s({...t,contactNo:a.target.value})}),e.jsx("input",{type:"text",className:"form-control mb-2",value:t.description,onChange:a=>s({...t,description:a.target.value})})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{children:"Update Home Image"}),e.jsx("input",{type:"file",className:"form-control mb-2",onChange:a=>d(a.target.files[0])}),t.home_img&&e.jsx("img",{src:t.home_img,alt:"Home",className:"img-preview"}),e.jsx("label",{children:"Update Hotel Front Image"}),e.jsx("input",{type:"file",className:"form-control mb-2",onChange:a=>h(a.target.files[0])}),t.hotel_front_img&&e.jsx("img",{src:t.hotel_front_img,alt:"Front",className:"img-preview"}),e.jsx("label",{children:"Update Hotel Image 1"}),e.jsx("input",{type:"file",className:"form-control mb-2",onChange:a=>p(a.target.files[0])}),t.hotel_img&&e.jsx("img",{src:t.hotel_img,alt:"Hotel 1",className:"img-preview"}),e.jsx("label",{children:"Update Hotel Image 2"}),e.jsx("input",{type:"file",className:"form-control mb-2",onChange:a=>x(a.target.files[0])}),t.hotel_img2&&e.jsx("img",{src:t.hotel_img2,alt:"Hotel 2",className:"img-preview"})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(null),children:"Cancel"}),e.jsx("button",{className:"btn btn-success",onClick:S,children:"Update"})]})]})})})]})};export{D as default};
