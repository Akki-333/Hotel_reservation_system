import{r,a as m,j as e}from"./index-DdFKgk6t.js";const N=()=>{const[h,p]=r.useState([]),[s,c]=r.useState({name:"",category:"",price:"",description:"",image:null}),[u,b]=r.useState(null),[i,l]=r.useState(""),x=["Starter","Main Course","Dessert","Beverage"];r.useEffect(()=>{d()},[]);const d=async()=>{try{const t=await m.get("http://localhost:5000/get-foods");p(t.data)}catch(t){console.error("Failed to fetch foods",t)}},g=async t=>{t.preventDefault();const a=new FormData;a.append("name",s.name),a.append("category",s.category),a.append("price",s.price),a.append("description",s.description),a.append("image",s.image);try{await m.post("http://localhost:5000/add-food",a,{headers:{"Content-Type":"multipart/form-data"}}),d(),c({name:"",category:"",price:"",description:"",image:null}),l(""),alert("Food added successfully")}catch(o){console.error("Failed to add food",o)}},n=t=>{const{name:a,value:o}=t.target;c({...s,[a]:o})},j=t=>{const a=t.target.files[0];a&&(c({...s,image:a}),l(URL.createObjectURL(a)))};return e.jsx("div",{className:"container mt-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-5",children:[e.jsx("h4",{className:"mb-4",children:u?"Edit Food":"Add New Food"}),e.jsxs("form",{onSubmit:g,encType:"multipart/form-data",children:[e.jsx("input",{type:"text",className:"form-control mb-3",name:"name",value:s.name,onChange:n,placeholder:"Food Name",required:!0}),e.jsxs("select",{className:"form-select mb-3",name:"category",value:s.category,onChange:n,required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),x.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsx("input",{type:"number",className:"form-control mb-3",name:"price",value:s.price,onChange:n,placeholder:"Price",required:!0}),e.jsx("textarea",{className:"form-control mb-3",name:"description",value:s.description,onChange:n,placeholder:"Description",required:!0}),e.jsx("input",{type:"file",className:"form-control mb-3",accept:"image/*",onChange:j}),i&&e.jsx("div",{className:"text-center mb-3",children:e.jsx("img",{src:i,alt:"Preview",className:"img-thumbnail",style:{width:"150px"}})}),e.jsx("button",{type:"submit",className:"btn btn-success w-100",children:"Add Food"})]})]}),e.jsxs("div",{className:"col-md-7",children:[e.jsx("h4",{className:"mb-4",children:"Food List"}),e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:h.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{children:t.category}),e.jsxs("td",{children:["â‚¹",t.price]}),e.jsx("td",{children:t.image_url&&e.jsx("img",{src:`http://localhost:5000/uploads/${t.image_url}`,alt:t.name,style:{width:"50px",height:"50px",borderRadius:"8px"}})}),e.jsxs("td",{className:"d-flex",style:{padding:"auto"},children:[e.jsx("button",{className:"btn btn-warning btn-sm me-2",children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm",children:"Delete"})]})]},t.id))})]})]})]})})};export{N as default};
