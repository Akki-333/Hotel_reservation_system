import{r as a,b as f,j as e,c as g,u as b,y as u,a as x,T as p,B as N}from"./index-DdFKgk6t.js";const j=a.forwardRef(({bsPrefix:t,fluid:r=!1,as:c="div",className:n,...o},l)=>{const i=f(t,"container"),d=typeof r=="string"?`-${r}`:"-fluid";return e.jsx(c,{ref:l,...o,className:g(n,r?`${i}${d}`:i)})});j.displayName="Container";const m=a.forwardRef(({bsPrefix:t,variant:r,animation:c="border",size:n,as:o="div",className:l,...i},d)=>{t=f(t,"spinner");const s=`${t}-${c}`;return e.jsx(o,{ref:d,...i,className:g(l,s,n&&`${s}-${n}`,r&&`text-${r}`)})});m.displayName="Spinner";const y=()=>{const[t,r]=a.useState([]),[c,n]=a.useState(!0),o=localStorage.getItem("userId"),l=b(),i=a.useRef(!1);a.useEffect(()=>{if(!o){i.current||(u.error("You must be logged in to view bookings!"),i.current=!0),n(!1),setTimeout(()=>l("/login"),600);return}x.get(`/my_bookings/${o}`).then(s=>{r(s.data),n(!1)}).catch(s=>{console.error("Error fetching bookings:",s),u.error("Failed to fetch bookings."),n(!1)})},[o]);const d=s=>{window.confirm("Are you sure you want to delete this history?")&&x.delete(`/cancel_booking/${s}`).then(()=>{u.success("Booking cancelled successfully!"),r(t.filter(h=>h.booking_id!==s))}).catch(h=>{console.error("Error cancelling booking:",h),u.error("Failed to delete booking.")})};return e.jsxs(j,{className:"mt-5",children:[e.jsx("h2",{className:"text-center mb-4",children:"My Bookings"}),c?e.jsx("div",{className:"text-center",children:e.jsx(m,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):t.length===0?e.jsx("p",{className:"text-center",children:"No bookings found."}):e.jsxs(p,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{children:"S.No"}),e.jsx("th",{children:"Hotel"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Table Number"}),e.jsx("th",{children:"Booking Time"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:t.map((s,h)=>e.jsxs("tr",{children:[e.jsx("td",{children:h+1}),e.jsx("td",{children:s.hotel_name}),e.jsx("td",{children:s.location}),e.jsx("td",{children:s.table_name||"N/A"}),e.jsx("td",{children:new Date(s.booking_time).toLocaleString()}),e.jsx("td",{children:e.jsx(N,{variant:"danger",onClick:()=>d(s.booking_id),children:e.jsx("i",{className:"bi bi-trash"})})})]},s.booking_id))})]})]})};export{y as default};
