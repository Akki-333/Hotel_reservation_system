import{r as n,a as o,j as e,y as h}from"./index-DdFKgk6t.js";const f=()=>{const[u,x]=n.useState([]),[t,i]=n.useState({name:"",category:"",price:"",description:"",calories:"",proteins:"",fibers:""}),[c,m]=n.useState(null),j=["Starter","Main Course","Dessert","Beverage"];n.useEffect(()=>{l()},[]);const l=async()=>{try{const s=await o.get("http://localhost:5000/get-foods");x(s.data)}catch(s){console.error("Failed to fetch foods",s)}},b=async s=>{s.preventDefault();const a={name:t.name,category:t.category,price:t.price,description:t.description,calories:t.calories||"0.0",proteins:t.proteins||"0.0",fibers:t.fibers||"0.0"};try{c?(await o.put(`http://localhost:5000/update-food/${c.id}`,a),h.success("Food updated successfully")):(await o.post("http://localhost:5000/add-food",a),h.success("Food added successfully")),l(),p()}catch(d){console.error("Failed to save food",d)}},g=s=>{m(s),i({name:s.name,category:s.category,price:s.price,description:s.description,calories:s.calories||"0.0",proteins:s.proteins||"0.0",fibers:s.fibers||"0.0"})},N=async s=>{if(window.confirm("Are you sure you want to delete this food item?"))try{await o.delete(`http://localhost:5000/delete-food/${s}`),l(),h.success("Food deleted successfully")}catch(a){console.error("Failed to delete food",a)}},r=s=>{const{name:a,value:d}=s.target;i({...t,[a]:d})},p=()=>{i({name:"",category:"",price:"",description:"",calories:"",proteins:"",fibers:""}),m(null)};return e.jsx("div",{className:"container mt-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-5",children:[e.jsx("h4",{className:"mb-4",children:c?"Edit Food":"Add New Food"}),e.jsxs("form",{onSubmit:b,children:[e.jsx("input",{type:"text",className:"form-control mb-3",name:"name",value:t.name,onChange:r,placeholder:"Food Name",required:!0}),e.jsxs("select",{className:"form-select mb-3",name:"category",value:t.category,onChange:r,required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),j.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx("input",{type:"number",className:"form-control mb-3",name:"price",value:t.price,onChange:r,placeholder:"Price",required:!0}),e.jsx("textarea",{className:"form-control mb-3",name:"description",value:t.description,onChange:r,placeholder:"Description"}),t.category==="Main Course"&&e.jsxs("div",{className:"card mb-3",children:[e.jsx("div",{className:"card-header",children:e.jsx("h6",{className:"mb-0",children:"Nutritional Information"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("input",{type:"number",className:"form-control",name:"calories",value:t.calories,onChange:r,placeholder:"Calories"}),e.jsx("span",{className:"input-group-text",children:"kcal"})]}),e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("input",{type:"number",className:"form-control",name:"proteins",value:t.proteins,onChange:r,placeholder:"Proteins"}),e.jsx("span",{className:"input-group-text",children:"g"})]}),e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("input",{type:"number",className:"form-control",name:"fibers",value:t.fibers,onChange:r,placeholder:"Fibers"}),e.jsx("span",{className:"input-group-text",children:"g"})]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-success w-100",children:c?"Update Food":"Add Food"}),c&&e.jsx("button",{type:"button",className:"btn btn-secondary w-100 mt-2",onClick:p,children:"Cancel Edit"})]})]}),e.jsxs("div",{className:"col-md-7",children:[e.jsx("h4",{className:"mb-4",children:"Food List"}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Calories"}),e.jsx("th",{children:"Proteins"}),e.jsx("th",{children:"Fibers"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.name}),e.jsx("td",{children:s.category}),e.jsxs("td",{children:["â‚¹",s.price]}),e.jsxs("td",{children:[s.calories||"-"," kcal"]}),e.jsxs("td",{children:[s.proteins||"-"," g"]}),e.jsxs("td",{children:[s.fibers||"-"," g"]}),e.jsxs("td",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>g(s),children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>N(s.id),children:"Delete"})]})]},s.id))})]})})]})]})})};export{f as default};
