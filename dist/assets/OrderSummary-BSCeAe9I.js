import{r as c,b as i,j as e,c as x,d as S,e as _,f as J,g as K,u as M,C as n,B as V,a as k,S as v}from"./index-DdFKgk6t.js";const B=c.forwardRef(({className:r,bsPrefix:s,as:a="div",...t},o)=>(s=i(s,"card-body"),e.jsx(a,{ref:o,className:x(r,s),...t})));B.displayName="CardBody";const F=c.forwardRef(({className:r,bsPrefix:s,as:a="div",...t},o)=>(s=i(s,"card-footer"),e.jsx(a,{ref:o,className:x(r,s),...t})));F.displayName="CardFooter";const R=c.createContext(null);R.displayName="CardHeaderContext";const b=c.forwardRef(({bsPrefix:r,className:s,as:a="div",...t},o)=>{const d=i(r,"card-header"),l=c.useMemo(()=>({cardHeaderBsPrefix:d}),[d]);return e.jsx(R.Provider,{value:l,children:e.jsx(a,{ref:o,...t,className:x(s,d)})})});b.displayName="CardHeader";const $=c.forwardRef(({bsPrefix:r,className:s,variant:a,as:t="img",...o},d)=>{const l=i(r,"card-img");return e.jsx(t,{ref:d,className:x(a?`${l}-${a}`:l,s),...o})});$.displayName="CardImg";const T=c.forwardRef(({className:r,bsPrefix:s,as:a="div",...t},o)=>(s=i(s,"card-img-overlay"),e.jsx(a,{ref:o,className:x(r,s),...t})));T.displayName="CardImgOverlay";const O=c.forwardRef(({className:r,bsPrefix:s,as:a="a",...t},o)=>(s=i(s,"card-link"),e.jsx(a,{ref:o,className:x(r,s),...t})));O.displayName="CardLink";const q=S("h6"),I=c.forwardRef(({className:r,bsPrefix:s,as:a=q,...t},o)=>(s=i(s,"card-subtitle"),e.jsx(a,{ref:o,className:x(r,s),...t})));I.displayName="CardSubtitle";const D=c.forwardRef(({className:r,bsPrefix:s,as:a="p",...t},o)=>(s=i(s,"card-text"),e.jsx(a,{ref:o,className:x(r,s),...t})));D.displayName="CardText";const z=S("h5"),H=c.forwardRef(({className:r,bsPrefix:s,as:a=z,...t},o)=>(s=i(s,"card-title"),e.jsx(a,{ref:o,className:x(r,s),...t})));H.displayName="CardTitle";const A=c.forwardRef(({bsPrefix:r,className:s,bg:a,text:t,border:o,body:d=!1,children:l,as:N="div",...h},j)=>{const m=i(r,"card");return e.jsx(N,{ref:j,...h,className:x(s,m,a&&`bg-${a}`,t&&`text-${t}`,o&&`border-${o}`),children:d?e.jsx(B,{children:l}):l})});A.displayName="Card";const U=Object.assign(A,{Img:$,Title:H,Subtitle:I,Body:B,Link:O,Text:D,Header:b,Footer:F,ImgOverlay:T}),u=c.forwardRef(({bsPrefix:r,className:s,as:a="div",...t},o)=>{const d=i(r,"row"),l=_(),N=J(),h=`${d}-cols`,j=[];return l.forEach(m=>{const p=t[m];delete t[m];let g;p!=null&&typeof p=="object"?{cols:g}=p:g=p;const C=m!==N?`-${m}`:"";g!=null&&j.push(`${h}${C}-${g}`)}),e.jsx(a,{ref:o,...t,className:x(s,d,...j)})});u.displayName="Row";const G=()=>{const r=K(),s=new URLSearchParams(r.search),[a,t]=c.useState(null),o=M();if(console.log("Booking Data",a),c.useEffect(()=>{const f=localStorage.getItem("pendingBooking");f&&t(JSON.parse(f))},[]),!a)return e.jsx("p",{children:"Loading order summary..."});const d=parseFloat(a.price)||0,l=parseFloat(a.discount)||0,N=parseInt(s.get("chairCount"),10)||1,h=JSON.parse(s.get("foodCategories")||"[]"),j=h.reduce((f,y)=>f+parseFloat(y.price||0),0),m=j*N,p=d+m,g=p*l/100,C=p-g,L=async f=>{f.preventDefault();const y=h.length>0?"with_food":"without_food",E={...a,total_price:C,food_status:y};try{const w=await k.post("http://localhost:5000/bookings",E);v.fire({title:"Booking Confirmed!",text:`Table booked for ${a.date} at ${a.time}.`,icon:"success",confirmButtonText:"OK"}),a.coupon&&await k.delete(`http://localhost:5000/coupons/${a.coupon}`),localStorage.removeItem("pendingBooking"),o("/my-bookings")}catch(w){console.error("Error submitting booking:",w),v.fire({title:"Booking Failed!",text:"Something went wrong.",icon:"error",confirmButtonText:"OK"})}};return e.jsx("div",{className:"container mt-5 d-flex justify-content-center",children:e.jsxs(U,{className:"shadow-lg p-4",style:{width:"600px",borderRadius:"12px"},children:[e.jsx("h2",{className:"text-center mb-4",children:"üßæ Order Summary"}),e.jsxs(u,{className:"mb-3",children:[e.jsx(n,{xs:6,children:e.jsx("strong",{children:"Table Price:"})}),e.jsxs(n,{xs:6,className:"text-end",children:["‚Çπ",d.toFixed(2)]})]}),h.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(u,{className:"mb-3",children:[e.jsx(n,{xs:6,children:e.jsx("strong",{children:"Selected Food Categories:"})}),e.jsx(n,{xs:6,className:"text-end",children:h.map(f=>f.name).join(", ")})]}),e.jsxs(u,{className:"mb-3",children:[e.jsx(n,{xs:6,children:e.jsx("strong",{children:"Total Food Price (Per Chair):"})}),e.jsxs(n,{xs:6,className:"text-end",children:["‚Çπ",j.toFixed(2)]})]}),e.jsxs(u,{className:"mb-3",children:[e.jsx(n,{xs:6,children:e.jsx("strong",{children:"Number of Chairs:"})}),e.jsx(n,{xs:6,className:"text-end",children:N})]}),e.jsxs(u,{className:"mb-3",children:[e.jsx(n,{xs:6,children:e.jsx("strong",{children:"Total Food Price (For All Chairs):"})}),e.jsxs(n,{xs:6,className:"text-end",children:["‚Çπ",m.toFixed(2)]})]})]}):e.jsxs(u,{className:"mb-3",children:[e.jsx(n,{xs:6,children:e.jsx("strong",{children:"Food Selection:"})}),e.jsx(n,{xs:6,className:"text-end text-danger",children:"‚ùå Not Selected"})]}),a.coupon&&e.jsxs(u,{className:"mb-3 text-success",children:[e.jsx(n,{xs:6,children:e.jsx("strong",{children:"Coupon Applied:"})}),e.jsxs(n,{xs:6,className:"text-end",children:["- ‚Çπ",g.toFixed(2)]})]}),e.jsx("hr",{}),e.jsxs(u,{className:"mb-4 fw-bold fs-5",children:[e.jsx(n,{xs:6,children:e.jsx("strong",{children:"Total Amount:"})}),e.jsxs(n,{xs:6,className:"text-end",children:["‚Çπ",C.toFixed(2)]})]}),e.jsx("div",{className:"text-center",children:e.jsx(V,{variant:"success",className:"px-5 py-2 fs-5",onClick:L,children:"‚úÖ Confirm Booking"})})]})})};export{G as default};
